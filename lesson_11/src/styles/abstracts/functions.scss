@use "sass:math";
@use "sass:meta";

@function strip-units($value) {
  @if meta.type-of($value) != "number" {
    @error "Expected a number, but got #{value}.";
  }

  $units: $value * 0 + 1;

  @return math.div($value, $units);
}

@function convert-units($value, $from-value, $to-value) {
  @if (
    math.unit($value) != math.unit($from-value) and not math.is-unitless($value)
  ) {
    @error "Only unitless and #{math.unit($from-units)} values are allowed.";
  }

  @return math.div(strip-units($value), strip-units($from-value)) * $to-value;
}

@function rem($value) {
  @return convert-units($value, 16px, 1rem);
}

@function em($unit-px) {
  @return convert-units($value, 16px, 1em, 16);
}

@function opaque-color($opacity, $color: currentColor) {
  @return color-mix(in oklab, $color, transparent (100% - $opacity));
}
